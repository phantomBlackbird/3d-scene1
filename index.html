<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Sunny Giant Forest City</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.2/dist/aframe-environment-component.min.js"></script>
</head>
<body>
    <a-scene shadow="type: pcfsoft">
      
      <a-assets>
        <a-asset-item id="big-bldg" src="assets/Big Building.glb"></a-asset-item>
        <a-asset-item id="factory" src="assets/Factory.glb"></a-asset-item>
        <a-asset-item id="large-bldg-1" src="assets/Large Building (1).glb"></a-asset-item>
        <a-asset-item id="large-bldg-2" src="assets/Large Building (2).glb"></a-asset-item>
        <a-asset-item id="low-bldg" src="assets/Low Building.glb"></a-asset-item>
        <a-asset-item id="palm" src="assets/Palm Tree.glb"></a-asset-item>
        <a-asset-item id="pine" src="assets/Pine Trees.glb"></a-asset-item>
        <a-asset-item id="grass-model" src="assets/grass.glb"></a-asset-item>
      </a-assets>

      <a-entity environment="preset: goldmine; skyType: gradient; skyColor: #4ba4e1; horizonColor: #96ccff; lighting: point; lightPosition: 0 10 10; dressingAmount: 0; groundColor: #2d4a1e;"></a-entity>

      <a-entity gltf-model="#big-bldg" position="-10 0 -25" shadow></a-entity>
      <a-entity gltf-model="#factory" position="15 0 -30" rotation="0 -45 0" shadow></a-entity>
      <a-entity gltf-model="#large-bldg-1" position="0 0 -20" shadow></a-entity>
      <a-entity gltf-model="#large-bldg-2" position="-20 0 -10" rotation="0 90 0" shadow></a-entity>
      <a-entity gltf-model="#low-bldg" position="10 0 -15" shadow></a-entity>

      <script>
        const scene = document.querySelector('a-scene');

        const scatter = (modelId, count, range, minScale, maxScale, isBuilding = false) => {
          for (let i = 0; i < count; i++) {
            const el = document.createElement('a-entity');
            el.setAttribute('gltf-model', modelId);
            
            // Fixed Y at 0 so nothing floats
            const x = (Math.random() - 0.5) * range;
            const z = (Math.random() - 0.5) * range - 30; 
            el.setAttribute('position', {x: x, y: 0, z: z});
            
            el.setAttribute('rotation', `0 ${Math.random() * 360} 0`);
            
            const s = Math.random() * (maxScale - minScale) + minScale;
            el.setAttribute('scale', `${s} ${s} ${s}`);
            
            if(isBuilding) el.setAttribute('shadow', 'receive: true; cast: true');
            scene.appendChild(el);
          }
        };

        scene.addEventListener('loaded', () => {
          // 1. TALL PINES (Scale tripled)
          scatter('#pine', 25, 120, 4.0, 8.0); 
          
          // 2. MORE BUILDINGS (Scattered in the distance)
          scatter('#large-bldg-1', 5, 80, 1, 1.5, true);
          scatter('#large-bldg-2', 5, 80, 1, 1.5, true);
          
          // 3. GROUNDED GRASS (Ensured Y=0)
          scatter('#grass-model', 60, 60, 0.8, 1.5);
          
          scatter('#palm', 10, 70, 1, 2);
        });
      </script>

      <a-entity id="rig" position="0 0 15">
        <a-camera look-controls wasd-controls="acceleration: 30"></a-camera>
      </a-entity>

    </a-scene>
</body>
</html>
