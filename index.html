<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>3D Forest City</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.2/dist/aframe-environment-component.min.js"></script>
</head>
<body>

    <a-scene shadow="type: pcfsoft">
        
        <a-assets>
            <a-asset-item id="model-big-building" src="assets/Big_Building.glb"></a-asset-item>
            <a-asset-item id="model-factory" src="assets/Factory.glb"></a-asset-item>
            <a-asset-item id="model-low-building" src="assets/Low_Building.glb"></a-asset-item>
            <a-asset-item id="model-pine" src="assets/Pine_Trees.glb"></a-asset-item>
            <a-asset-item id="model-palm" src="assets/Palm_Tree.glb"></a-asset-item>
            <a-asset-item id="model-grass" src="assets/Grass.glb"></a-asset-item>
        </a-assets>

        <a-entity environment="preset: forest; groundColor: #1b3013; dressingAmount: 0; shadow: true;"></a-entity>

        <a-entity gltf-model="#model-big-building" position="-10 0 -20" scale="1.5 1.5 1.5" shadow></a-entity>
        <a-entity gltf-model="#model-factory" position="12 0 -25" rotation="0 -30 0" shadow></a-entity>
        <a-entity gltf-model="#model-low-building" position="0 0 -15" shadow></a-entity>

        <script>
            const scene = document.querySelector('a-scene');

            function scatterModels(modelId, count, range, minScale, maxScale) {
                for (let i = 0; i < count; i++) {
                    let entity = document.createElement('a-entity');
                    entity.setAttribute('gltf-model', modelId);
                    
                    // Random Position
                    let x = (Math.random() - 0.5) * range;
                    let z = (Math.random() - 0.5) * range - 15; // Offset to keep center clear
                    entity.setAttribute('position', `${x} 0 ${z}`);
                    
                    // Random Rotation
                    entity.setAttribute('rotation', `0 ${Math.random() * 360} 0`);
                    
                    // Random Scale
                    let s = Math.random() * (maxScale - minScale) + minScale;
                    entity.setAttribute('scale', `${s} ${s} ${s}`);
                    
                    scene.appendChild(entity);
                }
            }

            // Scatter 20 Pine Trees and 40 Grass patches
            scene.addEventListener('loaded', () => {
                scatterModels('#model-pine', 20, 60, 1, 2);
                scatterModels('#model-grass', 40, 50, 0.5, 1.2);
            });
        </script>

        <a-entity id="rig" position="0 0 5">
            <a-camera look-controls wasd-controls="acceleration: 20"></a-camera>
        </a-entity>

    </a-scene>
</body>
</html>
